{"ast":null,"code":"import _toConsumableArray from\"/home/dlwldyd/project/video_chat/video-chat-backend/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/dlwldyd/project/video_chat/video-chat-backend/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/dlwldyd/project/video_chat/video-chat-backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/dlwldyd/project/video_chat/video-chat-backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/home/dlwldyd/project/video_chat/video-chat-backend/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19;import axios from\"axios\";import{useEffect,useRef,useState}from\"react\";import styled from\"styled-components\";import Nav from\"../navigator/Nav\";import{FaLock,FaAngleLeft,FaAngleRight,FaSearch}from\"react-icons/fa\";import{useNavigate}from'react-router';import queryString from'query-string';import{Link}from\"react-router-dom\";import ModalForm from\"../modal/ModalForm\";import handleAxiosException from\"../exception/handleAxiosException\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    font-family: \",\";\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    height: 1000px;\\n    flex-direction: column;\\n\"])),function(props){return props.theme.font;});var Table=styled.table(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    width: 1200px;\\n    border-spacing: 0;\\n\"])));var Thead=styled.thead(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    font-size: larger;\\n    height: 40px;\\n    background-color: \",\";\\n\"])),function(props){return props.theme.color.tableBgColor;});var ThRoomName=styled.th(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    border-bottom: 1px solid \",\";\\n    border-top: 1px solid  \",\";\\n\"])),function(props){return props.theme.color.tableBorderColor;},function(props){return props.theme.color.tableBorderColor;});var ThNumber=styled.th(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    border-bottom: 1px solid \",\";\\n    border-top: 1px solid  \",\";\\n\"])),function(props){return props.theme.color.tableBorderColor;},function(props){return props.theme.color.tableBorderColor;});var Tr=styled.tr(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n    font-size: large;\\n    height: 40px;\\n    &:hover {\\n        background-color: \",\";\\n    }\\n\"])),function(props){return props.theme.color.tableBgColor;});var TdRoomName=styled.td(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n    border-bottom: 1px solid \",\";\\n\"])),function(props){return props.theme.color.tableBorderColor;});var TdNumber=styled.td(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n    width: 120px;\\n    text-align: center;\\n    border-bottom: 1px solid \",\";\\n\"])),function(props){return props.theme.color.tableBorderColor;});var Room=styled.span(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n    &:hover {\\n        cursor: pointer;\\n    }\\n\"])));var Pagination=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n    display: flex;\\n    justify-content: space-between;\\n    margin-top: 60px;\\n\"])));var Page=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n    border: 1px solid \",\";\\n    border-radius: 50px;\\n    background-color: white;\\n    display: flex;\\n    justify-content: space-around;\\n    margin-left: 30px;\\n    margin-right: 30px;\\n\"])),function(props){return props.theme.color.tableBorderColor;});var PageNum=styled(Link)(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n    all: unset;\\n    border-radius: 50px;\\n    background-color: white;\\n    padding-left: 15px;\\n    padding-right: 15px;\\n    height: 40px;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    font-size: 15px;\\n    color: #969595;\\n    &:hover {\\n        cursor: pointer;\\n        background-color: \",\";\\n    }\\n\"])),function(props){return props.theme.color.tableBorderColor;});var Angle=styled(Link)(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n    all: unset;\\n    border-radius: 50%;\\n    background-color: white;\\n    width: 40px;\\n    height: 40px;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    border: 1px solid \",\";\\n    &:hover {\\n        cursor: pointer;\\n        background-color: \",\";\\n    }\\n\"])),function(props){return props.theme.color.tableBorderColor;},function(props){return props.theme.color.tableBorderColor;});var ModalContainer=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    font-family: \",\";    \\n    flex-direction: column;\\n    justify-content: space-around;\\n    align-items: flex-end;\\n\"])),function(props){return props.theme.font;});var Label=styled.label(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n    width: 380px;\\n    font-size: larger;\\n    &:hover {\\n        cursor: pointer;\\n    }\\n\"])));var InputText=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: space-between;\\n    align-items: center;\\n\"])));var Input=styled.input(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n    width: 380px;\\n    height: 38px;\\n    border-radius: 5px;\\n    border: 1px solid \",\";\\n    margin-top: 10px;\\n    margin-bottom: 10px;\\n    font-size: 17px;\\n    &:focus {\\n        border: 3px solid #458588;\\n        margin-top: 8px;\\n        margin-bottom: 8px;\\n    }\\n\"])),function(props){return props.theme.color.borderColor;});var SearchBtn=styled.button(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n    all: unset;\\n    border-radius: 10px;\\n    background-color: \",\";\\n    color: white;\\n    font-size: 20px;\\n    margin-right: 45px;\\n    padding: 5px 20px;\\n    &:hover {\\n        cursor: pointer;\\n    }\\n\"])),function(props){return props.theme.color.btnColor;});var SearchModalBtn=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n    width: 80px;\\n    height: 80px;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    &:hover {\\n        cursor: pointer;\\n    }\\n\"])));function SearchRoom(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalPages=_useState4[0],setTotalPages=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),pageList=_useState8[0],setPageList=_useState8[1];var navigate=useNavigate();var _queryString$parse=queryString.parse(window.location.search),page=_queryString$parse.page,roomName=_queryString$parse.roomName;var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),searchOpen=_useState10[0],setSearchOpen=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),pwOpen=_useState12[0],setPwOpen=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),searchRoomName=_useState14[0],setSearchRoomName=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),roomPassword=_useState16[0],setRoomPassword=_useState16[1];var roomId=useRef(\"\");var getRoomKey=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(roomId){var _yield$yield$axios$po,roomKey;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"http://localhost:8080/api/getRoomKey\",{roomId:roomId,password:roomPassword},{withCredentials:true});case 3:_context.next=5;return _context.sent.data;case 5:_yield$yield$axios$po=_context.sent;roomKey=_yield$yield$axios$po.roomKey;navigate(\"/video-chat\",{state:roomKey});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);handleAxiosException(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getRoomKey(_x){return _ref.apply(this,arguments);};}();var onClick=function onClick(event){getRoomKey(event.target.getAttribute(\"data-roomid\"));};var onClickLocked=function onClickLocked(event){roomId.current=event.target.getAttribute(\"data-roomid\");setPwOpen(function(pwOpen){return true;});};var onSearchOpen=function onSearchOpen(){setSearchOpen(function(searchOpen){return true;});};var onChange=function onChange(event){setSearchRoomName(function(searchRoom){return event.target.value;});};var onChangePw=function onChangePw(event){setRoomPassword(function(roomPassword){return event.target.value;});};var onSearch=function onSearch(){navigate(\"/search?roomName=\".concat(searchRoomName));setSearchOpen(function(searchOpen){return false;});};var onEnterFS=function onEnterFS(event){if(event.key===\"Enter\"){navigate(\"/search?roomName=\".concat(searchRoomName));setSearchOpen(function(searchOpen){return false;});}};var onEnterFP=function onEnterFP(event){if(event.key===\"Enter\"){getRoomKey(roomId.current);}};var onPwInput=function onPwInput(){getRoomKey(roomId.current);};var searchModal=/*#__PURE__*/_jsxs(ModalContainer,{children:[/*#__PURE__*/_jsxs(InputText,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"search\",children:\"\\uBC29 \\uC774\\uB984\"}),/*#__PURE__*/_jsx(Input,{value:searchRoomName,id:\"search\",onChange:onChange,onKeyDown:onEnterFS})]}),/*#__PURE__*/_jsx(SearchBtn,{onClick:onSearch,children:\"\\uAC80\\uC0C9\"})]});var passwordModal=/*#__PURE__*/_jsxs(ModalContainer,{children:[/*#__PURE__*/_jsxs(InputText,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"room-pw\",children:\"\\uD328\\uC2A4\\uC6CC\\uB4DC\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",value:roomPassword,id:\"room-pw\",onChange:onChangePw,onKeyDown:onEnterFP})]}),/*#__PURE__*/_jsx(SearchBtn,{onClick:onPwInput,children:\"\\uC785\\uB825\"})]});useEffect(function(){var beginPage=1;var getRoomInfo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var json,begin,arr,i;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!roomName){_context2.next=6;break;}_context2.next=3;return axios.get(\"http://localhost:8080/api/roomInfo?page=\".concat(page,\"&roomName=\").concat(roomName),{withCredentials:true});case 3:_context2.t0=_context2.sent;_context2.next=9;break;case 6:_context2.next=8;return axios.get(\"http://localhost:8080/api/roomInfo?page=\".concat(page),{withCredentials:true});case 8:_context2.t0=_context2.sent;case 9:_context2.next=11;return _context2.t0.data;case 11:json=_context2.sent;setRooms(function(rooms){return _toConsumableArray(json.content);});setCurrentPage(function(currentPage){return json.pageable.pageNumber+1;});setTotalPages(function(totalPages){return json.totalPages;});begin=Math.floor(json.pageable.pageNumber/10)*10+1;if(begin!==beginPage){beginPage=begin;arr=[];for(i=0;i<Math.min(10,json.totalPages-begin+1);i++){arr.push(begin+i);}setPageList(function(pageList){return[].concat(arr);});}case 17:case\"end\":return _context2.stop();}}},_callee2);}));return function getRoomInfo(){return _ref2.apply(this,arguments);};}();getRoomInfo();},[page,roomName]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(ModalForm,{isOpen:searchOpen,setIsOpen:setSearchOpen,content:searchModal}),/*#__PURE__*/_jsx(ModalForm,{isOpen:pwOpen,setIsOpen:setPwOpen,content:passwordModal}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SearchModalBtn,{onClick:onSearchOpen,children:/*#__PURE__*/_jsx(FaSearch,{})}),/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(Thead,{children:/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(ThRoomName,{children:\"\\uBC29 \\uC774\\uB984\"}),/*#__PURE__*/_jsx(ThNumber,{children:\"\\uC778\\uC6D0\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rooms.map(function(room,idx){return/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(TdRoomName,{children:/*#__PURE__*/_jsxs(Room,{\"data-roomid\":room.roomId,\"data-roomname\":room.roomName,onClick:room.locked?onClickLocked:onClick,children:[room.roomName,\" \",room.locked?/*#__PURE__*/_jsx(FaLock,{}):null]})}),/*#__PURE__*/_jsxs(TdNumber,{children:[room.count,\"/9\"]})]},idx);})})]})]}),/*#__PURE__*/_jsxs(Pagination,{children:[currentPage>10?/*#__PURE__*/_jsx(Angle,{to:roomName?\"/search?page=\".concat(Math.floor((currentPage-1)/10)*10-1,\"&roomName=\").concat(roomName):\"/search?page=\".concat(Math.floor((currentPage-1)/10)*10-1),children:/*#__PURE__*/_jsx(FaAngleLeft,{})}):null,/*#__PURE__*/_jsx(Page,{children:pageList.map(function(page,idx){return currentPage===page?/*#__PURE__*/_jsx(PageNum,{to:roomName?\"/search?page=\".concat(page-1,\"&roomName=\").concat(roomName):\"/search?page=\".concat(page-1),style:{\"backgroundColor\":\"#261a31\",\"color\":\"white\"},children:page},idx):/*#__PURE__*/_jsx(PageNum,{to:roomName?\"/search?page=\".concat(page-1,\"&roomName=\").concat(roomName):\"/search?page=\".concat(page-1),children:page},idx);})}),currentPage<=Math.floor((totalPages-1)/10)*10?/*#__PURE__*/_jsx(Angle,{to:roomName?\"/search?page=\".concat(Math.ceil(currentPage/10)*10,\"&roomName=\").concat(roomName):\"/search?page=\".concat(Math.ceil(currentPage/10)*10),children:/*#__PURE__*/_jsx(FaAngleRight,{})}):null]})]});}export default SearchRoom;","map":{"version":3,"names":["axios","useEffect","useRef","useState","styled","Nav","FaLock","FaAngleLeft","FaAngleRight","FaSearch","useNavigate","queryString","Link","ModalForm","handleAxiosException","Container","div","props","theme","font","Table","table","Thead","thead","color","tableBgColor","ThRoomName","th","tableBorderColor","ThNumber","Tr","tr","TdRoomName","td","TdNumber","Room","span","Pagination","Page","PageNum","Angle","ModalContainer","Label","label","InputText","Input","input","borderColor","SearchBtn","button","btnColor","SearchModalBtn","SearchRoom","rooms","setRooms","totalPages","setTotalPages","currentPage","setCurrentPage","pageList","setPageList","navigate","parse","window","location","search","page","roomName","searchOpen","setSearchOpen","pwOpen","setPwOpen","searchRoomName","setSearchRoomName","roomPassword","setRoomPassword","roomId","getRoomKey","post","password","withCredentials","data","roomKey","state","onClick","event","target","getAttribute","onClickLocked","current","onSearchOpen","onChange","searchRoom","value","onChangePw","onSearch","onEnterFS","key","onEnterFP","onPwInput","searchModal","passwordModal","beginPage","getRoomInfo","get","json","content","pageable","pageNumber","begin","Math","floor","arr","i","min","push","map","room","idx","locked","count","ceil"],"sources":["/home/dlwldyd/project/video_chat/video-chat-backend/frontend/src/chatRoom/SearchRoom.tsx"],"sourcesContent":["import axios, { AxiosError } from \"axios\";\nimport { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Nav from \"../navigator/Nav\";\nimport { FaLock, FaAngleLeft, FaAngleRight, FaSearch } from \"react-icons/fa\";\nimport { useNavigate } from 'react-router';\nimport queryString from 'query-string';\nimport { Link } from \"react-router-dom\";\nimport ModalForm from \"../modal/ModalForm\";\nimport handleAxiosException from \"../exception/handleAxiosException\";\n\nconst Container = styled.div`\n    font-family: ${props => props.theme.font};\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 1000px;\n    flex-direction: column;\n`\n\nconst Table = styled.table`\n    width: 1200px;\n    border-spacing: 0;\n`\n\nconst Thead = styled.thead`\n    font-size: larger;\n    height: 40px;\n    background-color: ${props => props.theme.color.tableBgColor};\n`\n\nconst ThRoomName = styled.th`\n    border-bottom: 1px solid ${props => props.theme.color.tableBorderColor};\n    border-top: 1px solid  ${props => props.theme.color.tableBorderColor};\n`\n\nconst ThNumber = styled.th`\n    border-bottom: 1px solid ${props => props.theme.color.tableBorderColor};\n    border-top: 1px solid  ${props => props.theme.color.tableBorderColor};\n`\n\nconst Tr = styled.tr`\n    font-size: large;\n    height: 40px;\n    &:hover {\n        background-color: ${props => props.theme.color.tableBgColor};\n    }\n`\n\nconst TdRoomName = styled.td`\n    border-bottom: 1px solid ${props => props.theme.color.tableBorderColor};\n`\n\nconst TdNumber = styled.td`\n    width: 120px;\n    text-align: center;\n    border-bottom: 1px solid ${props => props.theme.color.tableBorderColor};\n`\n\nconst Room = styled.span`\n    &:hover {\n        cursor: pointer;\n    }\n`\n\nconst Pagination = styled.div`\n    display: flex;\n    justify-content: space-between;\n    margin-top: 60px;\n`\n\nconst Page = styled.div`\n    border: 1px solid ${props => props.theme.color.tableBorderColor};\n    border-radius: 50px;\n    background-color: white;\n    display: flex;\n    justify-content: space-around;\n    margin-left: 30px;\n    margin-right: 30px;\n`\n\nconst PageNum = styled(Link)`\n    all: unset;\n    border-radius: 50px;\n    background-color: white;\n    padding-left: 15px;\n    padding-right: 15px;\n    height: 40px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 15px;\n    color: #969595;\n    &:hover {\n        cursor: pointer;\n        background-color: ${props => props.theme.color.tableBorderColor};\n    }\n`\n\nconst Angle = styled(Link)`\n    all: unset;\n    border-radius: 50%;\n    background-color: white;\n    width: 40px;\n    height: 40px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border: 1px solid ${props => props.theme.color.tableBorderColor};\n    &:hover {\n        cursor: pointer;\n        background-color: ${props => props.theme.color.tableBorderColor};\n    }\n`\n\nconst ModalContainer = styled.div`\n    width: 100%;\n    height: 100%;\n    display: flex;\n    font-family: ${props => props.theme.font};    \n    flex-direction: column;\n    justify-content: space-around;\n    align-items: flex-end;\n`\n\nconst Label = styled.label`\n    width: 380px;\n    font-size: larger;\n    &:hover {\n        cursor: pointer;\n    }\n`\n\nconst InputText = styled.div`\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n`\n\nconst Input = styled.input`\n    width: 380px;\n    height: 38px;\n    border-radius: 5px;\n    border: 1px solid ${props => props.theme.color.borderColor};\n    margin-top: 10px;\n    margin-bottom: 10px;\n    font-size: 17px;\n    &:focus {\n        border: 3px solid #458588;\n        margin-top: 8px;\n        margin-bottom: 8px;\n    }\n`\n\nconst SearchBtn = styled.button`\n    all: unset;\n    border-radius: 10px;\n    background-color: ${props => props.theme.color.btnColor};\n    color: white;\n    font-size: 20px;\n    margin-right: 45px;\n    padding: 5px 20px;\n    &:hover {\n        cursor: pointer;\n    }\n`\n\nconst SearchModalBtn = styled.div`\n    width: 80px;\n    height: 80px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    &:hover {\n        cursor: pointer;\n    }\n`\n\ninterface ClickEvent extends React.MouseEvent<HTMLSpanElement> {\n    target: HTMLSpanElement;\n}\n\nfunction SearchRoom() {\n\n    const [rooms, setRooms] = useState<{roomId: number, roomName: string, locked: boolean, count: number}[]>([]);\n\n    const [totalPages, setTotalPages] = useState<number>(0);\n\n    const [currentPage, setCurrentPage] = useState<number>(0);\n\n    const [pageList, setPageList] = useState<number[]>([]);\n\n    const navigate = useNavigate();\n\n    const {page, roomName} = queryString.parse(window.location.search);\n\n    const [searchOpen, setSearchOpen] = useState(false);\n\n    const [pwOpen, setPwOpen] = useState(false);\n\n    const [searchRoomName, setSearchRoomName] = useState(\"\");\n\n    const [roomPassword, setRoomPassword] = useState(\"\");    \n\n    const roomId = useRef<string | null>(\"\");\n\n    const getRoomKey = async (roomId: string | null) => {\n        try {\n            const {roomKey} = await (await axios.post(\"http://localhost:8080/api/getRoomKey\", {\n                roomId,\n                password: roomPassword\n            }, {\n                withCredentials: true\n            })).data;\n            navigate(`/video-chat`, {state: roomKey});\n        } catch(err: unknown | AxiosError) {\n            handleAxiosException(err);\n        }\n        \n    }\n\n    const onClick = (event: ClickEvent) => {\n        \n        getRoomKey(event.target.getAttribute(\"data-roomid\"));\n    }\n\n    const onClickLocked = (event: ClickEvent) => {\n        roomId.current = event.target.getAttribute(\"data-roomid\");\n        setPwOpen(pwOpen => true);\n    }\n\n    const onSearchOpen = () => {\n        setSearchOpen(searchOpen => true);\n    }\n\n    const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setSearchRoomName(searchRoom => event.target.value);\n    }\n\n    const onChangePw = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setRoomPassword(roomPassword => event.target.value);\n    }\n\n    const onSearch = () => {\n        navigate(`/search?roomName=${searchRoomName}`);\n        setSearchOpen(searchOpen => false);\n    }\n\n    const onEnterFS = (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if(event.key === \"Enter\") {\n            navigate(`/search?roomName=${searchRoomName}`);\n            setSearchOpen(searchOpen => false);\n        }\n    }\n\n    const onEnterFP = (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if(event.key === \"Enter\") {\n            getRoomKey(roomId.current);\n        }\n    }\n    \n\n    const onPwInput = () => {\n        getRoomKey(roomId.current);\n    }\n\n    const searchModal = (\n        <ModalContainer>\n            <InputText>\n                <Label htmlFor=\"search\">방 이름</Label>\n                <Input value={searchRoomName} id=\"search\" onChange={onChange} onKeyDown={onEnterFS} />\n            </InputText>\n            <SearchBtn onClick={onSearch}>검색</SearchBtn>\n        </ModalContainer>\n    );\n\n    const passwordModal = (\n        <ModalContainer>\n            <InputText>\n                <Label htmlFor=\"room-pw\">패스워드</Label>\n                <Input type=\"password\" value={roomPassword} id=\"room-pw\" onChange={onChangePw} onKeyDown={onEnterFP} />\n            </InputText>\n            <SearchBtn onClick={onPwInput}>입력</SearchBtn>\n        </ModalContainer>\n    );\n\n    useEffect(() => {\n\n        let beginPage = 1;\n\n        const getRoomInfo = async () => {\n            const json = await (\n                roomName ? \n                    await axios.get(`http://localhost:8080/api/roomInfo?page=${page}&roomName=${roomName}`, {\n                        withCredentials: true\n                    }) : \n                    await axios.get(`http://localhost:8080/api/roomInfo?page=${page}`, {\n                        withCredentials: true\n                    })\n            ).data;\n            setRooms(rooms => [...json.content]);\n            setCurrentPage(currentPage => json.pageable.pageNumber+1);\n            setTotalPages(totalPages => json.totalPages);\n            const begin = Math.floor(json.pageable.pageNumber/10)*10+1;\n            if(begin !== beginPage) {\n                beginPage = begin;\n                const arr: number[] = [];\n                for (let i = 0; i < Math.min(10, json.totalPages-begin+1); i++) {\n                    arr.push(begin+i);\n                }\n                setPageList(pageList => [...arr]);\n            }\n        }\n\n        getRoomInfo();\n\n    }, [page, roomName]);\n\n    return (\n        <Container>\n            <Nav />\n            <ModalForm isOpen={searchOpen} setIsOpen={setSearchOpen} content={searchModal}></ModalForm>\n            <ModalForm isOpen={pwOpen} setIsOpen={setPwOpen} content={passwordModal}></ModalForm>\n            <div>\n                <SearchModalBtn onClick={onSearchOpen}><FaSearch /></SearchModalBtn>\n                <Table>\n                    <Thead>\n                        <Tr>\n                            <ThRoomName>방 이름</ThRoomName>\n                            <ThNumber>인원</ThNumber>\n                        </Tr>\n                    </Thead>\n                    <tbody>\n                        {rooms.map((room, idx) => \n                        <Tr key={idx}>\n                                <TdRoomName><Room data-roomid={room.roomId} data-roomname={room.roomName} onClick={room.locked ? onClickLocked : onClick}>{room.roomName} {room.locked ? <FaLock /> : null}</Room></TdRoomName>\n                            <TdNumber>{room.count}/9</TdNumber>\n                        </Tr>)}\n                    </tbody>\n                </Table>            \n            </div>\n            <Pagination>\n                {currentPage > 10 ? \n                    <Angle to={roomName ? \n                        `/search?page=${Math.floor((currentPage-1)/10)*10-1}&roomName=${roomName}` : \n                        `/search?page=${Math.floor((currentPage-1)/10)*10-1}`}>\n                    <FaAngleLeft />\n                    </Angle> : \n                    null}\n                <Page>\n                    {pageList.map((page, idx) => \n                    currentPage === page ? \n                        <PageNum \n                            key={idx} \n                            to={roomName ? \n                                `/search?page=${page-1}&roomName=${roomName}` :\n                                `/search?page=${page-1}`}\n                            style={{\n                                \"backgroundColor\" : \"#261a31\", \n                                \"color\": \"white\"}}>\n                        {page}\n                        </PageNum> : \n                        <PageNum \n                            key={idx} \n                            to={roomName ? \n                                `/search?page=${page-1}&roomName=${roomName}` :\n                                `/search?page=${page-1}`}>\n                        {page}\n                        </PageNum>\n                        )}\n                </Page>\n                {currentPage <= Math.floor((totalPages-1)/10)*10 ? \n                    <Angle \n                        to={roomName ? \n                            `/search?page=${Math.ceil(currentPage/10)*10}&roomName=${roomName}` : \n                            `/search?page=${Math.ceil(currentPage/10)*10}`}>\n                    <FaAngleRight />\n                    </Angle> : \n                    null}\n            </Pagination>\n        </Container>\n    );\n}\n\nexport default SearchRoom;"],"mappings":"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"},"metadata":{},"sourceType":"module"}