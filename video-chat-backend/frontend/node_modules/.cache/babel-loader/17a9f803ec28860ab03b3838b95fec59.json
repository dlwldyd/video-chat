{"ast":null,"code":"import _regeneratorRuntime from\"/home/dlwldyd/project/video_chat/video-chat-backend/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/dlwldyd/project/video_chat/video-chat-backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _taggedTemplateLiteral from\"/home/dlwldyd/project/video_chat/video-chat-backend/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import axios from\"axios\";import{useEffect}from\"react\";import{useNavigate}from\"react-router\";import styled from\"styled-components\";import myData from\"../data/data\";import handleAxiosException from\"../exception/handleAxiosException\";import{jsx as _jsx}from\"react/jsx-runtime\";var Box=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    height: 98vh;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n\"])));var Loading=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    font-size: 100px;\\n    font-family: \",\";;\\n\"])),function(props){return props.theme.font;});function FetchMemberInfo(){var navigate=useNavigate();// 서버로부터 사용자 로그인 정보를 가져와서 세션 스토리지에 저장한다.\nuseEffect(function(){var getMemberInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(myData.domain,\"/api/memberInfo\"),{withCredentials:true});case 2:_context.next=4;return _context.sent.data;case 4:json=_context.sent;sessionStorage.setItem(\"authenticated\",json.authenticated);if(json.authenticated){sessionStorage.setItem(\"username\",json.username);sessionStorage.setItem(\"nickname\",json.nickname);}navigate(\"/\",{replace:true});case 8:case\"end\":return _context.stop();}}},_callee);}));return function getMemberInfo(){return _ref.apply(this,arguments);};}();try{getMemberInfo();}catch(err){handleAxiosException(err);}},[navigate]);return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Loading,{children:\"\\uB85C\\uADF8\\uC778 \\uC911..\"})});}export default FetchMemberInfo;","map":{"version":3,"names":["axios","useEffect","useNavigate","styled","myData","handleAxiosException","Box","div","Loading","props","theme","font","FetchMemberInfo","navigate","getMemberInfo","get","domain","withCredentials","data","json","sessionStorage","setItem","authenticated","username","nickname","replace","err"],"sources":["/home/dlwldyd/project/video_chat/video-chat-backend/frontend/src/Auth/FetchMemberInfo.tsx"],"sourcesContent":["import axios, { AxiosError } from \"axios\";\nimport { useEffect } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport styled from \"styled-components\";\nimport myData from \"../data/data\";\nimport handleAxiosException from \"../exception/handleAxiosException\";\n\nconst Box = styled.div`\n    width: 100%;\n    height: 98vh;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`\n\nconst Loading = styled.div`\n    font-size: 100px;\n    font-family: ${props => props.theme.font};;\n`\n\nfunction FetchMemberInfo() {\n\n    const navigate = useNavigate();\n\n    // 서버로부터 사용자 로그인 정보를 가져와서 세션 스토리지에 저장한다.\n    useEffect(() => {\n        const getMemberInfo = async () => {\n            const json = await (await axios.get(`${myData.domain}/api/memberInfo`, {\n                withCredentials: true\n            })).data;\n            sessionStorage.setItem(\"authenticated\", json.authenticated);\n            if(json.authenticated) {\n                sessionStorage.setItem(\"username\", json.username);\n                sessionStorage.setItem(\"nickname\", json.nickname);\n            }\n            navigate(\"/\", {replace: true});\n        }\n        try {\n            getMemberInfo();\n        } catch(err: unknown | AxiosError) {\n            handleAxiosException(err);\n        }\n    }, [navigate]);\n\n    return (\n        <Box>\n            <Loading>로그인 중..</Loading>\n        </Box>\n    )\n}\nexport default FetchMemberInfo;"],"mappings":"2fAAA,MAAOA,MAAP,KAAkC,OAAlC,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,MAAOC,OAAP,KAAmB,cAAnB,CACA,MAAOC,qBAAP,KAAiC,mCAAjC,C,2CAEA,GAAMC,IAAG,CAAGH,MAAM,CAACI,GAAV,oLAAT,CAQA,GAAMC,QAAO,CAAGL,MAAM,CAACI,GAAV,oHAEM,SAAAE,KAAK,QAAIA,MAAK,CAACC,KAAN,CAAYC,IAAhB,EAFX,CAAb,CAKA,QAASC,gBAAT,EAA2B,CAEvB,GAAMC,SAAQ,CAAGX,WAAW,EAA5B,CAEA;AACAD,SAAS,CAAC,UAAM,CACZ,GAAMa,cAAa,4FAAG,oKACQd,MAAK,CAACe,GAAN,WAAaX,MAAM,CAACY,MAApB,oBAA6C,CACnEC,eAAe,CAAE,IADkD,CAA7C,CADR,6CAGdC,IAHc,QACZC,IADY,eAIlBC,cAAc,CAACC,OAAf,CAAuB,eAAvB,CAAwCF,IAAI,CAACG,aAA7C,EACA,GAAGH,IAAI,CAACG,aAAR,CAAuB,CACnBF,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAmCF,IAAI,CAACI,QAAxC,EACAH,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAmCF,IAAI,CAACK,QAAxC,EACH,CACDX,QAAQ,CAAC,GAAD,CAAM,CAACY,OAAO,CAAE,IAAV,CAAN,CAAR,CATkB,sDAAH,kBAAbX,cAAa,0CAAnB,CAWA,GAAI,CACAA,aAAa,GAChB,CAAC,MAAMY,GAAN,CAAiC,CAC/BrB,oBAAoB,CAACqB,GAAD,CAApB,CACH,CACJ,CAjBQ,CAiBN,CAACb,QAAD,CAjBM,CAAT,CAmBA,mBACI,KAAC,GAAD,wBACI,KAAC,OAAD,0CADJ,EADJ,CAKH,CACD,cAAeD,gBAAf"},"metadata":{},"sourceType":"module"}